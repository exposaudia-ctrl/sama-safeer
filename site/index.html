<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />

  <title>SAMA Safeer â€” Ø³Ù…Ø§ Ø³ÙÙŠØ±</title>
  <meta name="description" content="Ù…Ù†ØµØ© Ø«Ù†Ø§Ø¦ÙŠØ© Ø§Ù„Ù„ØºØ© (Ø¹Ø±Ø¨ÙŠ/English) Ù„ØªÙ…ÙƒÙŠÙ† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø±Ø³Ù…ÙŠØ© Ø§Ù„Ù…ÙˆØ«ÙˆÙ‚Ø©ØŒ Ù…Ø¹ Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ ÙˆØ¥Ø­Ø§Ù„Ø§Øª Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù„Ù…ØµØ§Ø¯Ø± Ø§Ù„Ø­ÙƒÙˆÙ…ÙŠØ©." />

  <!-- Open Graph -->
  <meta property="og:title" content="SAMA Safeer â€” Ø³Ù…Ø§ Ø³ÙÙŠØ±" />
  <meta property="og:description" content="Ù…ÙˆÙ‚Ø¹ Ø«Ù†Ø§Ø¦ÙŠ Ø§Ù„Ù„ØºØ© Ù…Ø¹ Ø±ÙˆØ§Ø¨Ø· Ø±Ø³Ù…ÙŠØ© ÙˆÙ…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ." />
  <meta property="og:type" content="website" />

  <style>
    :root{
      /* Brand tokens */
      --bg: #0b0f16;
      --panel: rgba(255,255,255,.06);
      --panel2: rgba(255,255,255,.10);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.70);
      --border: rgba(255,255,255,.14);
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --accent: #40E0D0; /* turquoise */
      --accent2: #7C3AED; /* violet */
      --good: #22c55e;
      --warn: #f59e0b;

      --radius: 16px;
      --radius2: 22px;
      --max: 1120px;
      --gap: 16px;

      --font: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, "Noto Sans Arabic", "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    @media (prefers-color-scheme: light){
      :root{
        --bg:#f7f8fb;
        --panel: rgba(0,0,0,.04);
        --panel2: rgba(0,0,0,.07);
        --text: rgba(0,0,0,.90);
        --muted: rgba(0,0,0,.62);
        --border: rgba(0,0,0,.12);
        --shadow: 0 10px 30px rgba(0,0,0,.12);
      }
    }

    [data-theme="dark"]{
      --bg:#0b0f16; --panel: rgba(255,255,255,.06); --panel2: rgba(255,255,255,.10);
      --text: rgba(255,255,255,.92); --muted: rgba(255,255,255,.70); --border: rgba(255,255,255,.14);
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    [data-theme="light"]{
      --bg:#f7f8fb; --panel: rgba(0,0,0,.04); --panel2: rgba(0,0,0,.07);
      --text: rgba(0,0,0,.90); --muted: rgba(0,0,0,.62); --border: rgba(0,0,0,.12);
      --shadow: 0 10px 30px rgba(0,0,0,.12);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: var(--font);
      color: var(--text);
      background:
        radial-gradient(1200px 800px at 20% -10%, rgba(64,224,208,.22), transparent 60%),
        radial-gradient(1100px 700px at 90% 10%, rgba(124,58,237,.22), transparent 55%),
        radial-gradient(900px 700px at 50% 110%, rgba(64,224,208,.14), transparent 55%),
        var(--bg);
      line-height:1.55;
    }

    a{ color: inherit; }
    .wrap{ max-width: var(--max); margin: 0 auto; padding: 18px; }

    /* Top bar */
    .top{
      position: sticky; top:0; z-index: 50;
      backdrop-filter: blur(10px);
      background: color-mix(in oklab, var(--bg) 70%, transparent);
      border-bottom: 1px solid var(--border);
    }
    .top .row{
      display:flex; align-items:center; justify-content:space-between; gap: 12px;
      padding: 12px 18px;
      max-width: var(--max); margin:0 auto;
    }
    .brand{
      display:flex; align-items:center; gap:10px; text-decoration:none;
      font-weight: 800; letter-spacing:.2px;
    }
    .logo{
      width:38px; height:38px; border-radius: 12px;
      background:
        radial-gradient(circle at 30% 30%, rgba(255,255,255,.20), transparent 55%),
        linear-gradient(135deg, var(--accent), var(--accent2));
      box-shadow: var(--shadow);
    }
    .brand small{ display:block; font-weight: 600; color: var(--muted); margin-top:2px; }

    .actions{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; justify-content:flex-end; }
    .btn{
      appearance:none; border:1px solid var(--border);
      background: var(--panel);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 999px;
      cursor:pointer;
      display:inline-flex; gap:8px; align-items:center;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
      user-select:none;
    }
    .btn:hover{ background: var(--panel2); }
    .btn:active{ transform: translateY(1px); }
    .btn.primary{
      border-color: color-mix(in oklab, var(--accent) 55%, var(--border));
      background: linear-gradient(135deg, color-mix(in oklab, var(--accent) 60%, transparent), color-mix(in oklab, var(--accent2) 45%, transparent));
    }
    .kbd{
      font-family: var(--mono);
      font-size: 12px;
      color: var(--muted);
      border: 1px solid var(--border);
      border-bottom-width: 2px;
      padding: 2px 6px;
      border-radius: 8px;
      background: color-mix(in oklab, var(--panel) 80%, transparent);
    }

    /* Hero */
    .hero{ padding: 18px 0 10px; }
    .heroGrid{
      display:grid; gap: var(--gap);
      grid-template-columns: 1.4fr .9fr;
      align-items: stretch;
    }
    @media (max-width: 920px){ .heroGrid{ grid-template-columns: 1fr; } }

    .card{
      border: 1px solid var(--border);
      border-radius: var(--radius2);
      background: color-mix(in oklab, var(--panel) 80%, transparent);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .card .pad{ padding: 18px; }

    .headline{
      margin:0;
      font-size: clamp(24px, 4vw, 38px);
      line-height: 1.12;
      letter-spacing: .2px;
    }
    .sub{
      margin: 10px 0 0;
      color: var(--muted);
      font-size: 16px;
    }

    /* Search */
    .searchRow{
      display:flex; gap: 10px; margin-top: 14px; flex-wrap:wrap;
    }
    .field{
      flex: 1 1 320px;
      display:flex; gap:10px; align-items:center;
      border:1px solid var(--border);
      background: var(--panel);
      border-radius: 999px;
      padding: 10px 12px;
    }
    .field input{
      width:100%;
      border:none; outline:none;
      background: transparent;
      color: var(--text);
      font-size: 15px;
    }
    .pill{
      display:inline-flex; gap:8px; align-items:center;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: var(--panel);
      color: var(--muted);
      font-size: 13px;
      cursor:pointer;
    }

    /* Sections */
    .grid2{
      display:grid; gap: var(--gap);
      grid-template-columns: 1fr 1fr;
    }
    @media (max-width: 920px){ .grid2{ grid-template-columns: 1fr; } }

    .h2{ margin:0 0 10px; font-size: 18px; letter-spacing:.2px; }
    .muted{ color: var(--muted); margin:0; }

    .list{ margin: 10px 0 0; padding:0; list-style:none; display:grid; gap: 10px; }
    .item{
      border: 1px solid var(--border);
      background: var(--panel);
      border-radius: var(--radius);
      padding: 12px;
      display:flex; justify-content:space-between; align-items:flex-start; gap: 12px;
    }
    .item a{ text-decoration:none; }
    .tag{
      font-size: 12px;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid var(--border);
      color: var(--muted);
      white-space:nowrap;
    }

    /* Chat */
    .chat{
      display:flex; flex-direction:column; gap: 10px;
      min-height: 340px;
    }
    .chatLog{
      flex:1;
      border:1px solid var(--border);
      background: var(--panel);
      border-radius: var(--radius2);
      padding: 12px;
      overflow:auto;
      scroll-behavior:smooth;
    }
    .msg{
      display:flex; gap:10px; margin: 10px 0;
      align-items:flex-start;
    }
    .bubble{
      max-width: 760px;
      border: 1px solid var(--border);
      background: color-mix(in oklab, var(--panel2) 85%, transparent);
      border-radius: 16px;
      padding: 10px 12px;
      white-space: pre-wrap;
      word-break: break-word;
    }
    .me .bubble{
      background: linear-gradient(135deg,
        color-mix(in oklab, var(--accent) 22%, var(--panel)),
        color-mix(in oklab, var(--accent2) 16%, var(--panel)));
    }
    .avatar{
      width:34px; height:34px; border-radius: 12px;
      border: 1px solid var(--border);
      display:grid; place-items:center;
      background: color-mix(in oklab, var(--panel) 70%, transparent);
      flex: 0 0 auto;
    }
    .chatBar{
      display:flex; gap: 10px; align-items:center; flex-wrap:wrap;
      border:1px solid var(--border);
      background: var(--panel);
      border-radius: var(--radius2);
      padding: 10px;
    }
    .chatBar textarea{
      flex:1 1 320px;
      min-height: 44px;
      max-height: 140px;
      resize: vertical;
      border:none; outline:none;
      background: transparent;
      color: var(--text);
      font-size: 15px;
      font-family: var(--font);
      padding: 6px 8px;
    }

    /* Footer */
    footer{ padding: 18px 0 40px; color: var(--muted); }
    .small{ font-size: 12px; line-height:1.6; }

    /* Accessibility helpers */
    .sr-only{
      position:absolute !important;
      width:1px; height:1px;
      padding:0; margin:-1px; overflow:hidden;
      clip: rect(0,0,0,0); white-space:nowrap; border:0;
    }
    :focus-visible{
      outline: 3px solid color-mix(in oklab, var(--accent) 70%, white);
      outline-offset: 2px;
      border-radius: 12px;
    }
  </style>
</head>

<body>
  <header class="top" role="banner">
    <div class="row">
      <a class="brand" href="#top" aria-label="SAMA Safeer Home">
        <span class="logo" aria-hidden="true"></span>
        <span>
          <span id="brandTitle">SAMA Safeer</span>
          <small id="brandSub">Official-first â€¢ Ø«Ù†Ø§Ø¦ÙŠ Ø§Ù„Ù„ØºØ©</small>
        </span>
      </a>

      <div class="actions">
        <button class="btn" id="btnLang" type="button" aria-label="Toggle language">
          ğŸŒ <span id="langLabel">AR</span>
        </button>
        <button class="btn" id="btnTheme" type="button" aria-label="Toggle theme">
          ğŸŒ“ <span id="themeLabel">Auto</span>
        </button>
        <a class="btn primary" href="#chat" id="ctaChat">ğŸ’¬ <span id="ctaChatText">Ø§Ø³Ø£Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯</span></a>
      </div>
    </div>
  </header>

  <main class="wrap" id="top">
    <!-- HERO -->
    <section class="hero">
      <div class="heroGrid">
        <div class="card">
          <div class="pad">
            <h1 class="headline" id="heroTitle">Ù…Ø¨Ø§Ø¯Ø±Ø© Ø³Ù…Ø§ â€” Ø³ÙÙŠØ±</h1>
            <p class="sub" id="heroSub">
              Ù…Ù†ØµØ© ØªÙØ±ÙƒÙ‘Ø² Ø¹Ù„Ù‰ Ø§Ù„Ù…ØµØ§Ø¯Ø± Ø§Ù„Ø±Ø³Ù…ÙŠØ© Ø£ÙˆÙ„Ù‹Ø§ØŒ Ù…Ø¹ Ø¨Ø­Ø« Ø°ÙƒÙŠ ÙˆØ±ÙˆØ§Ø¨Ø· Ù…ÙˆØ«ÙˆÙ‚Ø©ØŒ ÙˆØªØ¬Ø±Ø¨Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø±Ø§Ù‚ÙŠØ© ÙˆØ¨Ø³ÙŠØ·Ø©.
            </p>

            <div class="searchRow" aria-label="Search">
              <div class="field" role="search">
                <span aria-hidden="true">ğŸ”</span>
                <label class="sr-only" for="q">Search</label>
                <input id="q" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§â€¦ (Ù…Ø«Ø§Ù„: Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø¨ØªØ¹Ø§Ø« / Ø³ÙÙŠØ± / Ø¬Ø§Ù…Ø¹Ø§Øª)" autocomplete="off" />
              </div>
              <button class="btn primary" id="btnAsk" type="button">
                âœ¨ <span id="askLabel">Ø§Ø³Ø£Ù„</span> <span class="kbd">Enter</span>
              </button>
              <button class="btn" id="btnClear" type="button">ğŸ§¹ <span id="clearLabel">Ù…Ø³Ø­</span></button>
            </div>

            <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
              <button class="pill" type="button" data-suggest="Scholarship program FAQ MOE">
                â­ <span id="pill1">Ø£Ø³Ø¦Ù„Ø© Ø´Ø§Ø¦Ø¹Ø© (Ø±Ø³Ù…ÙŠ)</span>
              </button>
              <button class="pill" type="button" data-suggest="Safeer scholarship steps and requirements">
                ğŸ§­ <span id="pill2">Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø³ÙØ§Ø±Ø©/Ø³ÙÙŠØ±</span>
              </button>
              <button class="pill" type="button" data-suggest="Saudi scholarships 2025 2026 official statistics">
                ğŸ“Š <span id="pill3">Ø¥Ø­ØµØ§Ø¡Ø§Øª Ø±Ø³Ù…ÙŠØ©</span>
              </button>
              <button class="pill" type="button" data-suggest="Visa and study abroad official requirements Saudi">
                ğŸ§¾ <span id="pill4">Ù…ØªØ·Ù„Ø¨Ø§Øª Ø¹Ø§Ù…Ø©</span>
              </button>
            </div>

            <p class="muted" style="margin-top:12px" id="heroNote">
              Ù…Ù„Ø§Ø­Ø¸Ø©: Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ù‡Ù†Ø§ Ø³ÙŠÙØ±Ø¬Ø¹ Ù„Ùƒ Ø¥Ø¬Ø§Ø¨Ø© + Ø±ÙˆØ§Ø¨Ø· Ù…Ø±Ø¬Ø¹ÙŠØ©. (Ø³Ù†ÙØ¹Ù‘Ù„ Ø°Ù„Ùƒ Ø¹Ø¨Ø± Back-end Ø¨Ø¹Ø¯ Ø®Ø·ÙˆØ© Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„ØªØ§Ù„ÙŠØ©)
            </p>
          </div>
        </div>

        <aside class="card">
          <div class="pad">
            <h2 class="h2" id="quickTitle">ÙˆØµÙˆÙ„ Ø³Ø±ÙŠØ¹</h2>
            <p class="muted" id="quickSub">Ø±ÙˆØ§Ø¨Ø· Ø£Ø³Ø§Ø³ÙŠØ© (ØºÙŠÙ‘Ø±Ù‡Ø§ Ø­Ø³Ø¨ Ø§Ø­ØªÙŠØ§Ø¬Ùƒ)</p>
            <ul class="list" id="officialLinks">
              <li class="item">
                <div>
                  <a href="https://sites.moe.gov.sa/scholarship-program/" target="_blank" rel="noopener noreferrer">
                    <strong id="l1t">Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ø§Ø¨ØªØ¹Ø§Ø« â€” ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…</strong>
                  </a>
                  <div class="muted" id="l1d">Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø±Ø³Ù…ÙŠØ© + Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©</div>
                </div>
                <span class="tag" id="tagOfficial1">Official</span>
              </li>
              <li class="item">
                <div>
                  <a href="https://www.stats.gov.sa/" target="_blank" rel="noopener noreferrer">
                    <strong id="l2t">Ø§Ù„Ù‡ÙŠØ¦Ø© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„Ø¥Ø­ØµØ§Ø¡</strong>
                  </a>
                  <div class="muted" id="l2d">Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ¥Ø­ØµØ§Ø¡Ø§Øª Ø±Ø³Ù…ÙŠØ©</div>
                </div>
                <span class="tag" id="tagOfficial2">Official</span>
              </li>
              <li class="item">
                <div>
                  <a href="https://www.my.gov.sa/" target="_blank" rel="noopener noreferrer">
                    <strong id="l3t">Ø¨ÙˆØ§Ø¨Ø© my.gov.sa</strong>
                  </a>
                  <div class="muted" id="l3d">Ø®Ø¯Ù…Ø§Øª Ø­ÙƒÙˆÙ…ÙŠØ© Ù…ÙˆØ­Ù‘Ø¯Ø©</div>
                </div>
                <span class="tag" id="tagOfficial3">Official</span>
              </li>
            </ul>

            <div style="margin-top:12px">
              <p class="muted small" id="privacyNote">
                Ø§Ù„Ø®ØµÙˆØµÙŠØ©: Ù„Ø§ ØªØ¶Ø¹ Ø£ÙŠ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø§Ø³Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„. Ø³Ù†Ø¶ÙŠÙ Ø³ÙŠØ§Ø³Ø© Ø®ØµÙˆØµÙŠØ© ÙˆØ§Ø¶Ø­Ø© Ù„Ø§Ø­Ù‚Ù‹Ø§.
              </p>
            </div>
          </div>
        </aside>
      </div>
    </section>

    <!-- FEATURES -->
    <section class="grid2" aria-label="Features" style="margin-top: var(--gap);">
      <div class="card">
        <div class="pad">
          <h2 class="h2" id="feat1t">Ù…Ø¨Ø¯Ø£ â€œOfficial-Firstâ€</h2>
          <p class="muted" id="feat1d">
            Ø§Ù„Ù‡Ø¯Ù: Ù†ØªØ§Ø¦Ø¬ Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªÙˆØ«ÙŠÙ‚ Ø¨Ø±ÙˆØ§Ø¨Ø· Ø­ÙƒÙˆÙ…ÙŠØ©/Ø±Ø³Ù…ÙŠØ© Ù‚Ø¨Ù„ Ø£ÙŠ Ø´ÙŠØ¡.
          </p>
          <ul class="list">
            <li class="item"><span id="f11">ğŸ”— Ø¥Ø¬Ø§Ø¨Ø© + Ø±ÙˆØ§Ø¨Ø· Ù…ØµØ§Ø¯Ø±</span><span class="tag" id="f11t">Trust</span></li>
            <li class="item"><span id="f12">ğŸ§  ØªÙ„Ø®ÙŠØµ ÙˆØ§Ø¶Ø­ Ø¨Ø¯ÙˆÙ† Ø­Ø´Ùˆ</span><span class="tag" id="f12t">Clarity</span></li>
            <li class="item"><span id="f13">ğŸ§­ ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¥Ù„Ù‰ â€œÙ…Ø³Ø§Ø± Ø®Ø·ÙˆØ§Øªâ€</span><span class="tag" id="f13t">Action</span></li>
          </ul>
        </div>
      </div>

      <div class="card">
        <div class="pad">
          <h2 class="h2" id="feat2t">ØªØ¬Ø±Ø¨Ø© Ù…Ø³ØªØ®Ø¯Ù… Ø±Ø§Ù‚ÙŠØ©</h2>
          <p class="muted" id="feat2d">
            ØªØµÙ…ÙŠÙ… Ù†Ø¸ÙŠÙØŒ Ø³Ø±Ø¹Ø©ØŒ ÙˆØ¥ØªØ§Ø­Ø© (Accessibility) + Ø¯Ø¹Ù… Ø¹Ø±Ø¨ÙŠ/Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ.
          </p>
          <ul class="list">
            <li class="item"><span id="f21">âš¡ Ø£Ø¯Ø§Ø¡ Ø³Ø±ÙŠØ¹ (Core Web Vitals)</span><span class="tag" id="f21t">Speed</span></li>
            <li class="item"><span id="f22">â™¿ Ù…Ø¹Ø§ÙŠÙŠØ± WCAG</span><span class="tag" id="f22t">A11y</span></li>
            <li class="item"><span id="f23">ğŸŒ— ÙˆØ¶Ø¹ Ù„ÙŠÙ„ÙŠ/Ù†Ù‡Ø§Ø±ÙŠ</span><span class="tag" id="f23t">Theme</span></li>
          </ul>
        </div>
      </div>
    </section>

    <!-- CHAT -->
    <section id="chat" style="margin-top: var(--gap);" aria-label="Chat assistant">
      <div class="card">
        <div class="pad chat">
          <div style="display:flex; align-items:flex-start; justify-content:space-between; gap:12px; flex-wrap:wrap;">
            <div>
              <h2 class="h2" id="chatTitle">Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ</h2>
              <p class="muted" id="chatSub">
                Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒâ€¦ ÙˆØ³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰ Ø§Ù„Ù€Back-end (Netlify Function) ÙˆØ¥Ø±Ø¬Ø§Ø¹ Ø¥Ø¬Ø§Ø¨Ø© + Ø±ÙˆØ§Ø¨Ø·.
              </p>
            </div>
            <div style="display:flex; gap:10px; align-items:center;">
              <button class="btn" id="btnDemo" type="button">ğŸ§ª <span id="demoLabel">ØªØ¬Ø±Ø¨Ø© Ø³Ø±ÙŠØ¹Ø©</span></button>
              <button class="btn" id="btnResetChat" type="button">ğŸ—‘ï¸ <span id="resetLabel">Ù…Ø³Ø­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©</span></button>
            </div>
          </div>

          <div class="chatLog" id="chatLog" aria-live="polite" aria-busy="false"></div>

          <div class="chatBar">
            <label class="sr-only" for="msg">Message</label>
            <textarea id="msg" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§â€¦ Ø«Ù… Ø§Ø¶ØºØ· Ø¥Ø±Ø³Ø§Ù„" aria-label="Chat message"></textarea>
            <button class="btn primary" id="btnSend" type="button">ğŸ“¨ <span id="sendLabel">Ø¥Ø±Ø³Ø§Ù„</span></button>
          </div>

          <p class="muted small" id="chatHint">
            Ø¥Ø°Ø§ Ø¸Ù‡Ø± Ø®Ø·Ø£ â€œBackend not configuredâ€ØŒ Ù‡Ø°Ø§ Ø·Ø¨ÙŠØ¹ÙŠ â€” Ø³Ù†Ø¶ÙŠÙ Ù…Ù„Ù Function ÙÙŠ Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„ØªØ§Ù„ÙŠØ©.
          </p>
        </div>
      </div>
    </section>

    <!-- FOOTER -->
    <footer>
      <div class="card">
        <div class="pad">
          <div style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap;">
            <div>
              <strong id="footBrand">SAMA Safeer</strong>
              <div class="small" id="footLine">Ù†Ø³Ø®Ø© Ø£ÙˆÙ„ÙŠØ© â€” Ø³ÙŠØªÙ… ØªØ·ÙˆÙŠØ±Ù‡Ø§ Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ© (UI + Backend + Ù…ØµØ§Ø¯Ø± Ø±Ø³Ù…ÙŠØ©).</div>
            </div>
            <div class="small" id="footMeta">
              <span>Build: <span id="buildInfo" class="kbd">static</span></span>
            </div>
          </div>

          <hr style="border:none; border-top:1px solid var(--border); margin: 14px 0;" />

          <div class="small" id="refsNote">
            Ù…Ø±Ø§Ø¬Ø¹ ØªØµÙ…ÙŠÙ…/Ø¥ØªØ§Ø­Ø©/Ù†Ø´Ø± (Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØ¬Ø±Ø¨Ø© ÙˆØ§Ù„Ø£Ø¯Ø§Ø¡): Apple HIG, WCAG, web.dev, Netlify Docs.
          </div>
        </div>
      </div>
    </footer>
  </main>

  <script>
    // ---------- State ----------
    const state = {
      lang: "ar",
      theme: "auto", // auto | light | dark
      chat: []
    };

    const el = (id) => document.getElementById(id);

    // ---------- i18n ----------
    const i18n = {
      ar: {
        dir: "rtl", lang:"ar",
        brandTitle:"SAMA Safeer",
        brandSub:"Official-first â€¢ Ø«Ù†Ø§Ø¦ÙŠ Ø§Ù„Ù„ØºØ©",
        ctaChatText:"Ø§Ø³Ø£Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯",
        heroTitle:"Ù…Ø¨Ø§Ø¯Ø±Ø© Ø³Ù…Ø§ â€” Ø³ÙÙŠØ±",
        heroSub:"Ù…Ù†ØµØ© ØªÙØ±ÙƒÙ‘Ø² Ø¹Ù„Ù‰ Ø§Ù„Ù…ØµØ§Ø¯Ø± Ø§Ù„Ø±Ø³Ù…ÙŠØ© Ø£ÙˆÙ„Ù‹Ø§ØŒ Ù…Ø¹ Ø¨Ø­Ø« Ø°ÙƒÙŠ ÙˆØ±ÙˆØ§Ø¨Ø· Ù…ÙˆØ«ÙˆÙ‚Ø©ØŒ ÙˆØªØ¬Ø±Ø¨Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø±Ø§Ù‚ÙŠØ© ÙˆØ¨Ø³ÙŠØ·Ø©.",
        askLabel:"Ø§Ø³Ø£Ù„", clearLabel:"Ù…Ø³Ø­",
        pill1:"Ø£Ø³Ø¦Ù„Ø© Ø´Ø§Ø¦Ø¹Ø© (Ø±Ø³Ù…ÙŠ)", pill2:"Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø³ÙØ§Ø±Ø©/Ø³ÙÙŠØ±", pill3:"Ø¥Ø­ØµØ§Ø¡Ø§Øª Ø±Ø³Ù…ÙŠØ©", pill4:"Ù…ØªØ·Ù„Ø¨Ø§Øª Ø¹Ø§Ù…Ø©",
        heroNote:"Ù…Ù„Ø§Ø­Ø¸Ø©: Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ù‡Ù†Ø§ Ø³ÙŠÙØ±Ø¬Ø¹ Ù„Ùƒ Ø¥Ø¬Ø§Ø¨Ø© + Ø±ÙˆØ§Ø¨Ø· Ù…Ø±Ø¬Ø¹ÙŠØ©. (Ø³Ù†ÙØ¹Ù‘Ù„ Ø°Ù„Ùƒ Ø¹Ø¨Ø± Back-end Ø¨Ø¹Ø¯ Ø®Ø·ÙˆØ© Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„ØªØ§Ù„ÙŠØ©)",
        quickTitle:"ÙˆØµÙˆÙ„ Ø³Ø±ÙŠØ¹", quickSub:"Ø±ÙˆØ§Ø¨Ø· Ø£Ø³Ø§Ø³ÙŠØ© (ØºÙŠÙ‘Ø±Ù‡Ø§ Ø­Ø³Ø¨ Ø§Ø­ØªÙŠØ§Ø¬Ùƒ)",
        l1t:"Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ø§Ø¨ØªØ¹Ø§Ø« â€” ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…", l1d:"Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø±Ø³Ù…ÙŠØ© + Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©",
        l2t:"Ø§Ù„Ù‡ÙŠØ¦Ø© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„Ø¥Ø­ØµØ§Ø¡", l2d:"Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ¥Ø­ØµØ§Ø¡Ø§Øª Ø±Ø³Ù…ÙŠØ©",
        l3t:"Ø¨ÙˆØ§Ø¨Ø© my.gov.sa", l3d:"Ø®Ø¯Ù…Ø§Øª Ø­ÙƒÙˆÙ…ÙŠØ© Ù…ÙˆØ­Ù‘Ø¯Ø©",
        privacyNote:"Ø§Ù„Ø®ØµÙˆØµÙŠØ©: Ù„Ø§ ØªØ¶Ø¹ Ø£ÙŠ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø§Ø³Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„. Ø³Ù†Ø¶ÙŠÙ Ø³ÙŠØ§Ø³Ø© Ø®ØµÙˆØµÙŠØ© ÙˆØ§Ø¶Ø­Ø© Ù„Ø§Ø­Ù‚Ù‹Ø§.",
        feat1t:"Ù…Ø¨Ø¯Ø£ â€œOfficial-Firstâ€", feat1d:"Ø§Ù„Ù‡Ø¯Ù: Ù†ØªØ§Ø¦Ø¬ Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªÙˆØ«ÙŠÙ‚ Ø¨Ø±ÙˆØ§Ø¨Ø· Ø­ÙƒÙˆÙ…ÙŠØ©/Ø±Ø³Ù…ÙŠØ© Ù‚Ø¨Ù„ Ø£ÙŠ Ø´ÙŠØ¡.",
        f11:"ğŸ”— Ø¥Ø¬Ø§Ø¨Ø© + Ø±ÙˆØ§Ø¨Ø· Ù…ØµØ§Ø¯Ø±", f12:"ğŸ§  ØªÙ„Ø®ÙŠØµ ÙˆØ§Ø¶Ø­ Ø¨Ø¯ÙˆÙ† Ø­Ø´Ùˆ", f13:"ğŸ§­ ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¥Ù„Ù‰ â€œÙ…Ø³Ø§Ø± Ø®Ø·ÙˆØ§Øªâ€",
        feat2t:"ØªØ¬Ø±Ø¨Ø© Ù…Ø³ØªØ®Ø¯Ù… Ø±Ø§Ù‚ÙŠØ©", feat2d:"ØªØµÙ…ÙŠÙ… Ù†Ø¸ÙŠÙØŒ Ø³Ø±Ø¹Ø©ØŒ ÙˆØ¥ØªØ§Ø­Ø© (Accessibility) + Ø¯Ø¹Ù… Ø¹Ø±Ø¨ÙŠ/Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ.",
        f21:"âš¡ Ø£Ø¯Ø§Ø¡ Ø³Ø±ÙŠØ¹ (Core Web Vitals)", f22:"â™¿ Ù…Ø¹Ø§ÙŠÙŠØ± WCAG", f23:"ğŸŒ— ÙˆØ¶Ø¹ Ù„ÙŠÙ„ÙŠ/Ù†Ù‡Ø§Ø±ÙŠ",
        chatTitle:"Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ",
        chatSub:"Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒâ€¦ ÙˆØ³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰ Ø§Ù„Ù€Back-end (Netlify Function) ÙˆØ¥Ø±Ø¬Ø§Ø¹ Ø¥Ø¬Ø§Ø¨Ø© + Ø±ÙˆØ§Ø¨Ø·.",
        demoLabel:"ØªØ¬Ø±Ø¨Ø© Ø³Ø±ÙŠØ¹Ø©", resetLabel:"Ù…Ø³Ø­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©", sendLabel:"Ø¥Ø±Ø³Ø§Ù„",
        chatHint:"Ø¥Ø°Ø§ Ø¸Ù‡Ø± Ø®Ø·Ø£ â€œBackend not configuredâ€ØŒ Ù‡Ø°Ø§ Ø·Ø¨ÙŠØ¹ÙŠ â€” Ø³Ù†Ø¶ÙŠÙ Ù…Ù„Ù Function ÙÙŠ Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„ØªØ§Ù„ÙŠØ©.",
        footLine:"Ù†Ø³Ø®Ø© Ø£ÙˆÙ„ÙŠØ© â€” Ø³ÙŠØªÙ… ØªØ·ÙˆÙŠØ±Ù‡Ø§ Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ© (UI + Backend + Ù…ØµØ§Ø¯Ø± Ø±Ø³Ù…ÙŠØ©).",
        refsNote:"Ù…Ø±Ø§Ø¬Ø¹ ØªØµÙ…ÙŠÙ…/Ø¥ØªØ§Ø­Ø©/Ù†Ø´Ø± (Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØ¬Ø±Ø¨Ø© ÙˆØ§Ù„Ø£Ø¯Ø§Ø¡): Apple HIG, WCAG, web.dev, Netlify Docs."
      },
      en: {
        dir: "ltr", lang:"en",
        brandTitle:"SAMA Safeer",
        brandSub:"Official-first â€¢ Bilingual",
        ctaChatText:"Ask the assistant",
        heroTitle:"SAMA Safeer Initiative",
        heroSub:"A bilingual official-first platform with trusted links, clean UX, and an AI assistant for guided answers.",
        askLabel:"Ask", clearLabel:"Clear",
        pill1:"Official FAQs", pill2:"Safeer steps", pill3:"Official stats", pill4:"General requirements",
        heroNote:"Note: The assistant will return an answer + reference links (enabled after the backend step).",
        quickTitle:"Quick access", quickSub:"Core official links (customize as needed)",
        l1t:"Scholarship Program â€” MOE", l1d:"Official pages + FAQs",
        l2t:"General Authority for Statistics", l2d:"Official data & statistics",
        l3t:"my.gov.sa Portal", l3d:"Unified government services",
        privacyNote:"Privacy: avoid sensitive personal data. A clear policy will be added later.",
        feat1t:"Official-First principle", feat1d:"Goal: verifiable answers with official references before anything else.",
        f11:"ğŸ”— Answer + sources", f12:"ğŸ§  Clear summaries", f13:"ğŸ§­ Step-by-step guidance",
        feat2t:"Premium user experience", feat2d:"Clean design, performance, accessibility + Arabic/English support.",
        f21:"âš¡ Fast performance (Core Web Vitals)", f22:"â™¿ WCAG accessibility", f23:"ğŸŒ— Light/Dark mode",
        chatTitle:"AI Assistant",
        chatSub:"Type your questionâ€¦ it will be sent to the backend (Netlify Function) and return an answer + links.",
        demoLabel:"Quick demo", resetLabel:"Clear chat", sendLabel:"Send",
        chatHint:"If you see â€œBackend not configuredâ€, thatâ€™s expected â€” weâ€™ll add the Function next.",
        footLine:"Early build â€” weâ€™ll iterate (UI + Backend + official sources).",
        refsNote:"Design/Accessibility/Deploy references: Apple HIG, WCAG, web.dev, Netlify Docs."
      }
    };

    function applyLang(lang){
      state.lang = lang;
      const t = i18n[lang];
      document.documentElement.lang = t.lang;
      document.documentElement.dir = t.dir;

      const ids = [
        "brandTitle","brandSub","ctaChatText","heroTitle","heroSub",
        "askLabel","clearLabel","pill1","pill2","pill3","pill4",
        "heroNote","quickTitle","quickSub","l1t","l1d","l2t","l2d","l3t","l3d",
        "privacyNote","feat1t","feat1d","f11","f12","f13","feat2t","feat2d","f21","f22","f23",
        "chatTitle","chatSub","demoLabel","resetLabel","sendLabel","chatHint",
        "footLine","refsNote"
      ];
      ids.forEach(id => { if(el(id)) el(id).textContent = t[id]; });

      // input placeholders
      el("q").placeholder = (lang==="ar")
        ? "Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§â€¦ (Ù…Ø«Ø§Ù„: Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø¨ØªØ¹Ø§Ø« / Ø³ÙÙŠØ± / Ø¬Ø§Ù…Ø¹Ø§Øª)"
        : "Type your questionâ€¦ (e.g., scholarship steps / requirements)";
      el("msg").placeholder = (lang==="ar")
        ? "Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§â€¦ Ø«Ù… Ø§Ø¶ØºØ· Ø¥Ø±Ø³Ø§Ù„"
        : "Type your questionâ€¦ then press Send";
      el("langLabel").textContent = (lang==="ar") ? "AR" : "EN";
    }

    // ---------- Theme ----------
    function applyTheme(mode){
      state.theme = mode;
      const root = document.documentElement;
      if(mode==="auto"){
        root.removeAttribute("data-theme");
        el("themeLabel").textContent = "Auto";
      } else {
        root.setAttribute("data-theme", mode);
        el("themeLabel").textContent = mode[0].toUpperCase() + mode.slice(1);
      }
      localStorage.setItem("sama_theme", mode);
    }

    // ---------- Chat helpers ----------
    function addMessage(role, content){
      state.chat.push({ role, content, ts: Date.now() });
      renderChat();
    }

    function escapeHtml(str){
      return str.replace(/[&<>"']/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[s]));
    }

    function renderChat(){
      const log = el("chatLog");
      log.innerHTML = state.chat.map(m => {
        const isMe = m.role === "user";
        const cls = isMe ? "msg me" : "msg";
        const av = isMe ? "ğŸ™‚" : "ğŸ¤–";
        return `
          <div class="${cls}">
            <div class="avatar" aria-hidden="true">${av}</div>
            <div class="bubble">${escapeHtml(m.content)}</div>
          </div>
        `;
      }).join("") || `
        <div class="msg">
          <div class="avatar" aria-hidden="true">ğŸ¤–</div>
          <div class="bubble">${state.lang==="ar"
            ? "Ø¬Ø§Ù‡Ø². Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„ÙƒØŒ ÙˆØ³Ø£Ø±Ø¬Ø¹ Ù„Ùƒ Ø¥Ø¬Ø§Ø¨Ø© ÙˆØ±ÙˆØ§Ø¨Ø· Ù…ØµØ§Ø¯Ø± (Ø¨Ø¹Ø¯ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù€Backend)."
            : "Ready. Ask a question and Iâ€™ll return an answer with source links (after the backend is enabled)."
          }</div>
        </div>
      `;
      log.scrollTop = log.scrollHeight;
    }

    async function callBackend(question){
      // Netlify Functions endpoint:
      // /.netlify/functions/chat
      const res = await fetch("/.netlify/functions/chat", {
        method: "POST",
        headers: { "Content-Type":"application/json" },
        body: JSON.stringify({ question, lang: state.lang })
      });

      if(!res.ok){
        const txt = await res.text().catch(()=> "");
        throw new Error("Backend not configured or error: " + res.status + " " + txt);
      }
      return res.json();
    }

    async function sendQuestion(q){
      const question = (q ?? el("msg").value ?? "").trim();
      if(!question) return;

      el("chatLog").setAttribute("aria-busy","true");
      addMessage("user", question);
      el("msg").value = "";

      try{
        const data = await callBackend(question);
        // Expect: { answer: "...", sources: [{title,url}] }
        let reply = data.answer || "(no answer)";
        if(Array.isArray(data.sources) && data.sources.length){
          reply += "\n\nâ€” Ù…ØµØ§Ø¯Ø±:\n" + data.sources
            .slice(0,6)
            .map((s,i)=> `${i+1}) ${s.title} â€” ${s.url}`)
            .join("\n");
        }
        addMessage("assistant", reply);
      }catch(err){
        addMessage("assistant", (state.lang==="ar")
          ? "âš ï¸ Ù„Ù… ÙŠØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù€Backend Ø¨Ø¹Ø¯ Ø£Ùˆ Ø­Ø¯Ø« Ø®Ø·Ø£.\n\nØ§Ù„Ø­Ù„: Ø£Ø¶Ù Netlify Function Ø¨Ø§Ø³Ù… chat (Ø³Ø£Ø¹Ø·ÙŠÙƒ Ø§Ù„ÙƒÙˆØ¯ ÙÙŠ Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„ØªØ§Ù„ÙŠØ©).\n\nØªÙØ§ØµÙŠÙ„: " + err.message
          : "âš ï¸ Backend not enabled yet or an error occurred.\n\nFix: add a Netlify Function named chat (next step).\n\nDetails: " + err.message
        );
      }finally{
        el("chatLog").setAttribute("aria-busy","false");
      }
    }

    // ---------- Wire UI ----------
    function init(){
      // persisted theme
      const savedTheme = localStorage.getItem("sama_theme") || "auto";
      applyTheme(savedTheme);

      // default lang
      applyLang("ar");
      renderChat();

      el("btnLang").addEventListener("click", () => {
        applyLang(state.lang === "ar" ? "en" : "ar");
        renderChat();
      });

      el("btnTheme").addEventListener("click", () => {
        const next = state.theme === "auto" ? "dark" : (state.theme === "dark" ? "light" : "auto");
        applyTheme(next);
      });

      el("btnSend").addEventListener("click", () => sendQuestion());
      el("btnAsk").addEventListener("click", () => {
        const q = el("q").value.trim();
        if(q){ el("msg").value = q; sendQuestion(q); }
      });

      el("q").addEventListener("keydown", (e) => {
        if(e.key === "Enter"){
          e.preventDefault();
          el("btnAsk").click();
        }
      });

      el("btnClear").addEventListener("click", () => { el("q").value = ""; el("q").focus(); });

      document.querySelectorAll("[data-suggest]").forEach(btn => {
        btn.addEventListener("click", () => {
          el("q").value = btn.getAttribute("data-suggest");
          el("q").focus();
        });
      });

      el("btnResetChat").addEventListener("click", () => {
        state.chat = [];
        renderChat();
      });

      el("btnDemo").addEventListener("click", () => {
        const demo = (state.lang==="ar")
          ? "Ø£Ø¨ØºÙ‰ Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø³Ù…ÙŠØ© Ù„Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø© Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ø§Ø¨ØªØ¹Ø§Ø« + ØªÙ„Ø®ÙŠØµ 5 Ù†Ù‚Ø§Ø·"
          : "Give me the official scholarship program FAQ page + summarize 5 key points";
        el("msg").value = demo;
        sendQuestion(demo);
      });

      el("buildInfo").textContent = "static + netlify-functions";
    }

    init();
  </script>
</body>
</html>